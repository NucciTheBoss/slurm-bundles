applications:
  percona-cluster:
    charm: cs:percona-cluster-293
    series: bionic
    num_units: 1
  slurmrestd:
    charm: ./../../../slurmrestd.charm
    num_units: 1
  slurm-configurator:
    charm: ./../../../slurm-configurator.charm
    num_units: 1
    constraints: instance-type=t3.medium spaces=nat
    bindings:
      "": nat
      elasticsearch: nat
      grafana-source: nat
      influxdb-api: nat
      nhc: nat
      prolog-epilog: nat
      slurmctld: nat
      slurmd: nat
      slurmdbd: nat
      slurmrestd: nat
    options:
      custom_config: |
        SlurmctldDebug=debug5
        SlurmdDebug=debug5
  slurmctld:
    charm: ./../../../slurmctld.charm
    num_units: 1
    constraints: instance-type=t3.medium spaces=nat
    bindings:
      "": nat
      nrpe-external-master: nat
      slurmctld: nat
      slurmctld-peer: nat
  slurmd:
    charm: ./../../../slurmd.charm
    num_units: 1
  slurmdbd:
    charm: ./../../../slurmdbd.charm
    num_units: 1
relations:
  - - slurmdbd:db
    - percona-cluster:db
  - - slurm-configurator:slurmdbd
    - slurmdbd:slurmdbd
  - - slurm-configurator:slurmd
    - slurmd:slurmd
  - - slurm-configurator:slurmctld
    - slurmctld:slurmctld
  - - slurm-configurator:slurmrestd
    - slurmrestd:slurmrestd
